

    <!--顶部文字-->
    <div class="navTop">
        <div class="containerO">
    <!--<ul class="right">
        <li><a href="">实体店</a></li>
        <li><a href="">商业合作</a></li>
    </ul>-->
    <div class="middle">
        <span>长生于野</span><span>安于堂</span>
    </div>
</div>
    </div>
    <!--顶部导航-->
    <div class="navContent">
        <div class="contentO">
            <div class="left"><a href="/furniture.do?typeOne=1"><img src="./images/logo.png" alt=""></a></div>
            <div class="right">
                <input type="text">
                <a class="iconfont search">&#xe52a;</a>
                <a class="iconfont shopCart" onclick="shopingCartByModal()">&#xe507;</a>
                <a class="iconfont personal" id="orderbtn" onclick="showOrder()">&#xe60c;</a><!--订单-->

                <!--<button data-toggle="modal" data-target="#myLogin">1111</button>-->

               <!-- <a class="iconfont" id="login">&#xe6c0;</a>

                <a href="" class="iconfont" data-toggle="modal" data-target="#myLogin" >&#xe6c0;</a>
-->
                <a href="#" class="iconfont mylogina" onclick="openmylogin()">&#xe6c0;</a>
                <a class="loginDown" href="/userLoginDown.do">退出登录</a>

            </div>
            <div class="middle">
                <ul>
                    <li>
                        <a href="/furniture.do?typeOne=1">家具</a>
                        <div></div>
                        <ul>
                            <li><a href="">椅</a></li>
                            <li><a href="">桌</a></li>
                            <li><a href="">床</a></li>
                            <li><a href="">几</a></li>
                            <li><a href="">柜</a></li>
                            <li><a href="">沙发</a></li>
                            <li><a href="">一枚板</a></li>
                            <li><a href="">其他</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/grocery?typeOne=2">家居</a>
                        <div></div>
                        <ul>
                             <li><a href="/grocery?type=1">餐厨</a></li>
                            <li><a href="/grocery?type=2">家居</a></li>
                            <li><a href="/grocery?type=3">摆件</a></li>
                            <li><a href="/grocery?type=4">养护</a></li>
                            <li><a href="/grocery?type=5">园艺</a></li>
                            <li><a href="/grocery?type=6">数码</a></li>
                            <li><a href="/grocery?type=7">文具</a></li>
                            <li><a href="/grocery?type=8">配饰</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/art.do?typeOne=3">艺术</a>
                        <div></div>
                        <ul>
                            <li><a href="#artist">艺术家</a></li>
                            <li><a href="#exhibition">展览</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/lanmu.do?typeOne=4">栏目</a>
                        <div></div>
                        <ul>
                            <li><a href="#home">梵几在家</a></li>
                            <li><a href="#drop">串门</a></li>
                            <li><a href="#lanmuArt">ARTSTAGE</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/news.do?typeOne=5">新事</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--右侧悬浮按钮-->
    <div class="right_button">
        <a class="top"></a>
        <a href="" class="contact"></a>
    </div>
    <!-- 用户登录 -->
    <form action="/login.do?typeOne=1" method="post">
    <div class="modal fade" id="myLogin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel6">账号登录</h4>
                </div>
                <div class="modal-body">
                    <input type="text" placeholder="用户名" name="userName" class="userName">
                    <input type="password" placeholder="密码" name="pwd" class="upwd"><br>
                    <div class="rememberpwddiv">
                        <!--<input type="checkbox" name="rememberpwd" class="rememberpwd">记住密码-->
                    </div>
                    <span class="forgetpwd"></span>
                    <button type="button" class="btn btn-primary" name="regiterbtn" id="loginbtn" onclick="login()">登录</button>
                    <div>
                        <span>还没有账号&nbsp;</span>
                        <span class="regspan">点击注册</span></div>
                </div>
                <div class="modal-footer">
                </div>

            </div>
        </div>
    </div>
    </form>
    <!-- 用户注册 -->
    <form action="" method="post">
    <div class="modal fade" id="myRegiter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel5">注册</h4>
                </div>

                <div class="modal-body">
                    <!--<input type="button" class="yanzheng" value="验证">-->
                    <input type="text" placeholder="用户名" name="userName" class="required" id="name">
                    <!--<input type="text" placeholder="验证码" name="validate" class="required">-->
                    <input id="regpwd" type="password" placeholder="密码" name="pwd" class="required pwd">
                    <input type="password" placeholder="确认密码" name="surepwd" class="required repwd"><br>
                    <input type="checkbox">我已阅读并同意遵守 法律声明 和 隐私条款
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" name="regiterbtn" id="regiterbtn">注册</button>
                </div>

            </div>
        </div>
    </div>
    </form>
    <!-- 忘记密码 -->
    <form action="/findpwd.do" method="post">
    <div class="modal fade" id="findpwd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel7">找回密码</h4>
                </div>
                <div class="modal-body">
                    <!--<input type="button" class="yanzheng" value="验证">-->
                    <input type="text" placeholder="用户名" name="userName" class="required" id="userName">
                    <!--<input type="text" placeholder="验证码" name="validate">-->
                    <input type="password" placeholder="新密码" name="pwd" class="required pwd">
                    <input type="password" placeholder="确认密码" name="surepwd" class="required repwd">
                    <input type="checkbox">我已阅读并同意遵守 法律声明 和 隐私条款
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" name="findpwdbtn" id="findpwdbtn">更新密码</button>
                </div>
            </div>
        </div>
    </div>
    </form>

    <div class="modal fade" id="LoginSuccess" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                   登录成功
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" type="button" data-dismiss="modal">确定</button>
                </div>

            </div>
        </div>
    </div>

    <script src="bootstrap/js/jquery-1.11.3.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script>

        var typeOne="<%=typeOne%>";
        var userId='<%=userId%>';
        var userName='<%=userName%>';
        var userPwd='<%=userPwd%>';
        var phone='<%=phone%>';
        var email='<%=email%>';

        console.log(userId);

        if (userId==""){
            $(".navContent .right .loginDown").css({
                "display":"none"
            });
        }
        else {
            $(".navContent .right .loginDown").css({
                "display":"inline-block"
            });
        }
        /*登录*/
        function login() {
            $.ajax({
                type:"post",
                url:"/login.do",
                data:{
                    userName:$("#myLogin .userName").val(),
                    pwd:$("#myLogin .upwd").val()
                },
                success:function (data) {
                    $("#myLogin").modal("hide");
                    $("#LoginSuccess").modal("show");
                    userId=data[0].userId;

                    $(".navContent .right .loginDown").css({
                        "display":"inline-block"
                    });

                }

            })
        }
        /*注册*/
        function regiter(){
            $.ajax({
                type:"post",
                url:"/regiter.do",
                data:{
                    userName:$("#name").val(),
                    pwd:$("#regpwd").val()
                },
                success:function (data) {

                    $("#myRegiter").modal("hide");
                    $("#myLogin").modal("show");
//                    userId=data[0].userId;
//
//                    $(".navContent .right .loginDown").css({
//                        "display":"inline-block"
//                    });

                }

            })
        }
        /*购物车*/
        function shopingCartByModal() {
            if (userId==""){
                $("#myLogin").modal("show");
               /* console.log(222);*/
            }
            else {
                window.location.href="/shopingCartByModal.do?"
                /*console.log(111)*/
            }
        }
        function showOrder() {
            if (userId==""){
                $("#myLogin").modal("show");
            }
            else {
                window.location.href="/showOrder.do"
            }
        }
        function openmylogin() {
            if(userId==""){
                openMotaimylogin();
            }else{
                console.log(typeof !!userId);
                console.log("userId:"+userId);
                gotopersonal();
            }
        }
        function openMotaimylogin(){
            $("#myLogin").modal({backdrop: 'static', keyboard: false});  //手动开启
        }
        //进入个人中心页面
        function gotopersonal(){
            console.log("userName:"+userName);
            console.log("userPwd:"+userPwd);
            // $.ajax({
            //     type: "post",//提交类型
            //     url: "/login.do?typeOne=1",//提交地址
            //     data: {//传参
            //         userName:userName,
            //         userPwd:userPwd
            //     },
            //     success: function (data) {
            //         console.log(data);
            //     },
            //     err: function (data) {
            //         console.log(data);
            //     }
            // })
        }
        //为表单的必填文本框添加提示信息（选择form中的所有后代input元素）
        $("form :input.required").each(function () {
            //添加到this对象的父级对象下
            $(this).after("<br><span class='high'></span><br>");
        });
        //为表单元素添加失去焦点事件
        $("form :input").blur(function(){
            var $parent = $(this).next().next();
            console.log("点击事件"+$parent);
            $parent.find(".msg").remove(); //删除以前的提醒元素（find()：查找匹配元素集中元素的所有匹配元素）
            //验证姓名
            if($(this).is("#name")){
                var nameVal = $.trim(this.value); //原生js去空格方式：this.replace(/(^\s*)|(\s*$)/g, "")
                var regName = /[~#^$@%&!*()<>:;'"{}【】  ]/;
                if(nameVal == "" || nameVal.length < 3 || regName.test(nameVal)){
                    var errorMsg = " 姓名非空，长度3位以上，不包含特殊字符！";
                    //class='msg onError' 中间的空格是层叠样式的格式
                    $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
                }
                else{
                    var okMsg=" 用户名正确哦";
                    $parent.find(".high").remove();
                    $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
                }
            }
            //验证密码
            if($(this).is(".pwd")){
                var emailVal = $.trim(this.value);
                var regEmail = /^[A-Za-z0-9_-]{6,}$/;
                if(emailVal== "" || (emailVal != "" && !regEmail.test(emailVal))){
                    var errorMsg = " 密码非空，长度6位以上，可以包含数字，大小写，-";
                    $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
                }
                else{
                    var okMsg=" 密码格式正确哦";
                    $parent.find(".high").remove();
                    $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
                }
            }
            //确认密码
            if($(this).is(".repwd")){
                var emailVal = $.trim(this.value);
                var regEmail = $(".pwd").val();
                if(emailVal== "" || (emailVal != regEmail)){
                    var errorMsg = " 密码不一致";
                    $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
                }
                else{
                    var okMsg=" 密码一致";
                    $parent.find(".high").remove();
                    $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
                }
            }
        }).keyup(function(){
            //triggerHandler 防止事件执行完后，浏览器自动为标签获得焦点
            $(this).triggerHandler("blur");
        }).focus(function(){
            $(this).triggerHandler("blur");
        });

        /*页面加载完成*/
        $(function () {
            /*顶部导航选中状态*/
            if (typeOne>0){
                $(".navContent .middle>ul>li>a").eq(typeOne-1).css({
                    "border-bottom":"2px solid black"
                });
            }


            /*顶部导航*/
            $(".navContent .middle>ul>li").mouseover(function () {
                $(this).children().eq(0).css({
                    "border-bottom":"2px solid black"
                });
                if (typeOne>0){
                    $(".navContent .middle>ul>li>a").eq(typeOne-1).css({
                        "border-bottom":"2px solid transparent"
                    });
                }

            });
            $(".navContent .middle>ul>li").mouseout(function () {
                $(this).children().eq(0).css({
                    "border-bottom":"2px solid transparent"
                });
                if (typeOne>0){
                    $(".navContent .middle>ul>li>a").eq(typeOne-1).css({
                        "border-bottom":"2px solid black"
                    });
                }
            });

            /*顶部搜索图标*/
            $(".navContent .search").on("mouseover",function () {
                $(".navContent .right input").css({
                    "display":"inline-block"
                });
            });
            $(".navContent .search").on("mouseout",function () {
                $(".navContent .right input").css({
                    "display":"none"
                });
            });
            $(".navContent .right input").on("mouseover",function () {
                $(".navContent .right input").css({
                    "display":"inline-block"
                });
            });
            $(".navContent .right input").on("mouseout",function () {
                $(".navContent .right input").css({
                    "display":"none"
                });
            });

            /*右边悬浮按钮-回到顶部*/
            $(".right_button .top").click(function () {
                $(window).scrollTop(0);
            });

            /*模态框*/

            $("#myLogin .forgetpwd").on("click",function () {
                $("#myLogin").modal("hide");
                $("#findpwd").modal("show");
            });

            $("#myLogin .regspan").on("click",function () {
                $("#myLogin").modal("hide");
                $("#myRegiter").modal("show");
            });

            $("#login").on("click",function () {
                $("#myLogin").modal("show");
            });

        });

        /*滚动条滚动*/
        $(window).scroll(function (){
            /*顶部导航变化*/
            if ($(window).scrollTop()>=30){
                $(".navTop").css({
                    "visibility":"hidden"
                });
                $(".navContent").css({
                    "position":"fixed",
                    "left":"0",
                    "top":"0"
                });
            }
            else {
                $(".navTop").css({
                    "visibility":"visible"
                });
                $(".navContent").css({
                    "position":"relative",
                    "left":"0",
                    "top":"0"
                })
            }
            /*右侧悬浮按钮*/
            if ($(window).scrollTop()>=425){
                $(".right_button .contact").css({
                    "transform":"translateY(-55px)"
                })
            }
            else {
                $(".right_button .contact").css({
                    "transform":"translateY(0px)"
                })
            }
        });

    </script>
